{"version":3,"sources":["webpack:///./node_modules/emailjs-com/source/index.js","webpack:///./node_modules/emailjs-com/source/models/EmailJSResponseStatus.js","webpack:///./node_modules/emailjs-com/source/services/ui/UI.js","webpack:///./src/views/Subscribe.vue?1a7e","webpack:///./src/views/Subscribe.vue","webpack:///./src/views/Subscribe.vue?5bf1"],"names":["Object","defineProperty","exports","value","EmailJSResponseStatus","sendForm","send","init","EmailJSResponseStatus_1","enumerable","get","UI_1","_userID","_origin","sendPost","url","data","headers","Promise","resolve","reject","xhr","XMLHttpRequest","key","addEventListener","event","responseStatus","target","status","text","open","setRequestHeader","appendGoogleCaptcha","templatePrams","element","document","getElementById","fixIdSelector","selector","userID","origin","serviceID","templateID","params","lib_version","user_id","service_id","template_id","template_params","JSON","stringify","form","querySelector","nodeName","UI","progressState","formData","FormData","append","then","response","successState","error","errorState","default","httpResponse","this","responseText","clearAll","classList","remove","PROGRESS","DONE","ERROR","add","class","sent","type","verStatus","userName","verUserName","maxlength","placeholder","userEmail","verUserEmail","submit","time","to","setup","store","router","test","commit","interval","setInterval","clearInterval","push","path","catch","alert","finally","title","render","__scopeId"],"mappings":"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","file":"js/chunk-44bb4a18.51009992.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmailJSResponseStatus = exports.sendForm = exports.send = exports.init = void 0;\nvar EmailJSResponseStatus_1 = require(\"./models/EmailJSResponseStatus\");\nObject.defineProperty(exports, \"EmailJSResponseStatus\", { enumerable: true, get: function () { return EmailJSResponseStatus_1.EmailJSResponseStatus; } });\nvar UI_1 = require(\"./services/ui/UI\");\nvar _userID = null;\nvar _origin = 'https://api.emailjs.com';\nfunction sendPost(url, data, headers) {\n    if (headers === void 0) { headers = {}; }\n    return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.addEventListener('load', function (event) {\n            var responseStatus = new EmailJSResponseStatus_1.EmailJSResponseStatus(event.target);\n            if (responseStatus.status === 200 || responseStatus.text === 'OK') {\n                resolve(responseStatus);\n            }\n            else {\n                reject(responseStatus);\n            }\n        });\n        xhr.addEventListener('error', function (event) {\n            reject(new EmailJSResponseStatus_1.EmailJSResponseStatus(event.target));\n        });\n        xhr.open('POST', url, true);\n        for (var key in headers) {\n            xhr.setRequestHeader(key, headers[key]);\n        }\n        xhr.send(data);\n    });\n}\nfunction appendGoogleCaptcha(templatePrams) {\n    var element = document && document.getElementById('g-recaptcha-response');\n    if (element && element.value) {\n        templatePrams['g-recaptcha-response'] = element.value;\n    }\n    element = null;\n    return templatePrams;\n}\nfunction fixIdSelector(selector) {\n    if (selector[0] !== '#' && selector[0] !== '.') {\n        return '#' + selector;\n    }\n    return selector;\n}\n/**\n * Initiation\n * @param {string} userID - set the EmailJS user ID\n * @param {string} origin - set the EmailJS origin\n */\nfunction init(userID, origin) {\n    _userID = userID;\n    _origin = origin || 'https://api.emailjs.com';\n}\nexports.init = init;\n/**\n * Send a template to the specific EmailJS service\n * @param {string} serviceID - the EmailJS service ID\n * @param {string} templateID - the EmailJS template ID\n * @param {Object} templatePrams - the template params, what will be set to the EmailJS template\n * @param {string} userID - the EmailJS user ID\n * @returns {Promise<EmailJSResponseStatus>}\n */\nfunction send(serviceID, templateID, templatePrams, userID) {\n    var params = {\n        lib_version: '2.6.4',\n        user_id: userID || _userID,\n        service_id: serviceID,\n        template_id: templateID,\n        template_params: appendGoogleCaptcha(templatePrams)\n    };\n    return sendPost(_origin + '/api/v1.0/email/send', JSON.stringify(params), {\n        'Content-type': 'application/json'\n    });\n}\nexports.send = send;\n/**\n * Send a form the specific EmailJS service\n * @param {string} serviceID - the EmailJS service ID\n * @param {string} templateID - the EmailJS template ID\n * @param {string | HTMLFormElement} form - the form element or selector\n * @param {string} userID - the EmailJS user ID\n * @returns {Promise<EmailJSResponseStatus>}\n */\nfunction sendForm(serviceID, templateID, form, userID) {\n    if (typeof form === 'string') {\n        form = document.querySelector(fixIdSelector(form));\n    }\n    if (!form || form.nodeName !== 'FORM') {\n        throw 'Expected the HTML form element or the style selector of form';\n    }\n    UI_1.UI.progressState(form);\n    var formData = new FormData(form);\n    formData.append('lib_version', '2.6.4');\n    formData.append('service_id', serviceID);\n    formData.append('template_id', templateID);\n    formData.append('user_id', userID || _userID);\n    return sendPost(_origin + '/api/v1.0/email/send-form', formData)\n        .then(function (response) {\n        UI_1.UI.successState(form);\n        return response;\n    }, function (error) {\n        UI_1.UI.errorState(form);\n        return Promise.reject(error);\n    });\n}\nexports.sendForm = sendForm;\nexports.default = {\n    init: init,\n    send: send,\n    sendForm: sendForm\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmailJSResponseStatus = void 0;\nvar EmailJSResponseStatus = /** @class */ (function () {\n    function EmailJSResponseStatus(httpResponse) {\n        this.status = httpResponse.status;\n        this.text = httpResponse.responseText;\n    }\n    return EmailJSResponseStatus;\n}());\nexports.EmailJSResponseStatus = EmailJSResponseStatus;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UI = void 0;\nvar UI = /** @class */ (function () {\n    function UI() {\n    }\n    UI.clearAll = function (form) {\n        form.classList.remove(this.PROGRESS);\n        form.classList.remove(this.DONE);\n        form.classList.remove(this.ERROR);\n    };\n    UI.progressState = function (form) {\n        this.clearAll(form);\n        form.classList.add(this.PROGRESS);\n    };\n    UI.successState = function (form) {\n        form.classList.remove(this.PROGRESS);\n        form.classList.add(this.DONE);\n    };\n    UI.errorState = function (form) {\n        form.classList.remove(this.PROGRESS);\n        form.classList.add(this.ERROR);\n    };\n    UI.PROGRESS = 'emailjs-sending';\n    UI.DONE = 'emailjs-success';\n    UI.ERROR = 'emailjs-error';\n    return UI;\n}());\nexports.UI = UI;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Subscribe.vue?vue&type=style&index=0&id=7bdbb15f&lang=scss&scoped=true\"","<script>\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\nimport { ref, reactive, onBeforeMount } from '@vue/runtime-core';\r\n\r\nimport emailjs from 'emailjs-com';\r\n\r\nexport default {\r\n  setup() {\r\n    const store = useStore();\r\n\r\n    const router = useRouter();\r\n\r\n    const time = ref(5);\r\n\r\n    const sent = ref(false);\r\n\r\n    const data = reactive({ userName: '', userEmail: '' });\r\n\r\n    const verStatus = reactive({ userName: true, userEmail: true });\r\n\r\n    const verUserName = () =>\r\n      (verStatus.userName = /^[0-9a-zA-Z\\u4e00-\\u9fa5 ]{1,20}$/.test(data.userName));\r\n\r\n    const verUserEmail = () =>\r\n      (verStatus.userEmail = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/.test(\r\n        data.userEmail\r\n      ));\r\n\r\n    const submit = () => {\r\n      if (data.userName === '') verStatus.userName = false;\r\n      if (data.userEmail === '') verStatus.userEmail = false;\r\n      if (verStatus.userName && verStatus.userEmail) {\r\n        store.commit('handleImageLoading', true);\r\n        emailjs\r\n          .send('service_pjnw3ps', 'template_zsud6sd', data, 'user_m7kEbIM1U8HRX3MaYTcIk')\r\n          .then(() => {\r\n            sent.value = true;\r\n            const interval = setInterval(() => {\r\n              time.value--;\r\n              if (time.value === 0) {\r\n                clearInterval(interval);\r\n                router.push({ path: '/' });\r\n              }\r\n            }, 1000);\r\n          })\r\n          .catch(() => {\r\n            alert('可能是寄信的數量超出免費額度了QQ');\r\n          })\r\n          .finally(() => {\r\n            store.commit('handleImageLoading', false);\r\n          });\r\n      }\r\n    };\r\n\r\n    onBeforeMount(() => (document.title = 'Juntify - 訂閱'));\r\n\r\n    return { time, sent, data, verStatus, verUserName, verUserEmail, submit };\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"screen\">\r\n    <span class=\"text\">免費訂閱享有更多內容</span>\r\n    <div class=\"divider\"></div>\r\n    <form class=\"form\">\r\n      <input\r\n        type=\"text\"\r\n        :class=\"{ 'ver-fail': !verStatus.userName }\"\r\n        v-if=\"!sent\"\r\n        v-model.trim.lazy=\"data.userName\"\r\n        @blur=\"verUserName\"\r\n        maxlength=\"20\"\r\n        placeholder=\"輸入你的姓名或暱稱\"\r\n      />\r\n      <input\r\n        type=\"email\"\r\n        :class=\"{ 'ver-fail': !verStatus.userEmail }\"\r\n        v-if=\"!sent\"\r\n        v-model.trim.lazy=\"data.userEmail\"\r\n        @blur=\"verUserEmail\"\r\n        maxlength=\"100\"\r\n        placeholder=\"輸入你的郵件地址\"\r\n      />\r\n      <button type=\"button\" v-if=\"!sent\" @click=\"submit\">訂閱</button>\r\n\r\n      <div class=\"sent-container\" v-if=\"sent\">\r\n        <i class=\"bi bi-check-circle\"></i>\r\n        <span class=\"success-text\">訂閱成功！請至信箱收取信件。</span>\r\n        <span class=\"jump-text\">畫面將在 {{ time }} 秒後跳轉至首頁</span>\r\n      </div>\r\n    </form>\r\n    <router-link to=\"/\">回首頁</router-link>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.screen {\r\n  @include d-flex-a-center-j-center;\r\n  flex-direction: column;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background: linear-gradient(45deg, #1b5e20, #4caf50 75%);\r\n\r\n  .text {\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .divider {\r\n    width: 240px;\r\n    margin: 8px 0 32px 0;\r\n    border-bottom: 1px solid #424242;\r\n  }\r\n\r\n  .form {\r\n    max-width: 360px;\r\n    padding: 46px;\r\n    background-color: #fff;\r\n    box-shadow: 0 0 24px 0 rgba(0, 0, 0, 0.25), 0 6px 6px 0 rgba(0, 0, 0, 0.25);\r\n\r\n    input {\r\n      width: 100%;\r\n      font-size: 14px;\r\n      border: 3px solid transparent;\r\n      outline: 0;\r\n      padding: 16px;\r\n      margin-bottom: 16px;\r\n      background-color: #f2f2f2;\r\n    }\r\n\r\n    button {\r\n      width: 100%;\r\n      font-size: 14px;\r\n      border: 0;\r\n      padding: 16px;\r\n      color: #fff;\r\n      background-color: #4caf50;\r\n      transition: 0.25s;\r\n\r\n      &:hover {\r\n        background-color: #43a047;\r\n      }\r\n    }\r\n\r\n    .sent-container {\r\n      @include d-flex-a-center-j-center;\r\n      flex-direction: column;\r\n\r\n      .bi-check-circle {\r\n        color: #4caf50;\r\n        font-size: 32px;\r\n        margin-bottom: 16px;\r\n      }\r\n\r\n      .success-text {\r\n        margin-bottom: 16px;\r\n      }\r\n\r\n      .jump-text {\r\n        color: #9e9e9e;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n\r\n  a {\r\n    color: white;\r\n    margin: 32px 0 120px 0;\r\n  }\r\n}\r\n\r\n.ver-fail {\r\n  border: 3px solid red !important;\r\n}\r\n</style>\r\n","import { render } from \"./Subscribe.vue?vue&type=template&id=7bdbb15f&scoped=true\"\nimport script from \"./Subscribe.vue?vue&type=script&lang=js\"\nexport * from \"./Subscribe.vue?vue&type=script&lang=js\"\n\nimport \"./Subscribe.vue?vue&type=style&index=0&id=7bdbb15f&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7bdbb15f\"\n\nexport default script"],"sourceRoot":""}